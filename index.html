<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Salon Chair System</title>

<style>
body{
  font-family: system-ui, Arial;
  background:#f2f4f8;
  padding:12px;
}

h2{text-align:center}

.card{
  background:#fff;
  padding:14px;
  border-radius:14px;
  margin-bottom:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
}

.btn{
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
  margin:6px 0;
  width:100%;
}

.chairs button{
  background:#2563eb;
  color:#fff;
  margin:4px;
}

.chairs button.active{
  background:#16a34a;
}

.services button{
  background:#e5e7eb;
}

.services button.active{
  background:#22c55e;
  color:#fff;
}

.save{background:#16a34a;color:#fff}
.reset{background:#b91c1c;color:#fff}
.download{background:#15803d;color:#fff}

table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  border-bottom:1px solid #ddd;
  padding:6px;
  text-align:center;
}

#msg{
  display:none;
  background:#111827;
  color:#fff;
  padding:10px;
  border-radius:10px;
  text-align:center;
  margin-bottom:10px;
}
</style>
</head>

<body>

<h2>Salon Chair System</h2>

<div id="msg"></div>

<div class="card chairs">
  <b>Select Chair</b><br>
  <button onclick="selectChair(1)">Chair 1</button>
  <button onclick="selectChair(2)">Chair 2</button>
  <button onclick="selectChair(3)">Chair 3</button>
  <button onclick="selectChair(4)">Chair 4</button>
  <button onclick="selectChair(5)">Chair 5</button>
</div>

<div class="card services">
  <b>Select Services</b>
  <button onclick="toggleService('Haircut',150)">Haircut ₹150</button>
  <button onclick="toggleService('Beard',80)">Beard ₹80</button>
  <button onclick="toggleService('Facial',300)">Facial ₹300</button>
  <button onclick="toggleService('Hair Color',100)">Hair Color ₹100</button>
</div>

<div class="card">
  <b>Current Bill</b><br><br>
  Total: ₹ <span id="billTotal">0</span>
  <button class="btn save" onclick="saveEntry()">Save Entry</button>
</div>

<div class="card">
  <b>Today Total: ₹ <span id="todayTotal">0</span></b>
</div>

<div class="card">
  <b>Entries</b>
  <table>
    <thead>
      <tr><th>Chair</th><th>Services</th><th>Amount</th></tr>
    </thead>
    <tbody id="records"></tbody>
  </table>
</div>

<button class="btn download" onclick="downloadReport()">Download Report</button>
<button class="btn reset" onclick="closeDay()">Close Day</button>

<script>
let selectedChair = null;
let services = [];
let total = 0;
let data = JSON.parse(localStorage.getItem("salonData")) || [];

function showMsg(t){
  const m=document.getElementById("msg");
  m.innerText=t;
  m.style.display="block";
  setTimeout(()=>m.style.display="none",2000);
}

function selectChair(c){
  selectedChair=c;
  document.querySelectorAll(".chairs button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
  showMsg("Chair "+c+" selected");
}

function toggleService(name,price){
  const idx=services.findIndex(s=>s.name===name);
  if(idx>-1){
    total-=services[idx].price;
    services.splice(idx,1);
    event.target.classList.remove("active");
  }else{
    services.push({name,price});
    total+=price;
    event.target.classList.add("active");
  }
  document.getElementById("billTotal").innerText=total;
}

function saveEntry(){
  if(!selectedChair || services.length==0){
    showMsg("Select chair and service");
    return;
  }
  const entry={
    chair:selectedChair,
    services:services.map(s=>s.name).join("+"),
    amount:total
  };
  data.push(entry);
  localStorage.setItem("salonData",JSON.stringify(data));
  resetBill();
  render();
  showMsg("Entry saved");
}

function resetBill(){
  services=[];
  total=0;
  selectedChair=null;
  document.getElementById("billTotal").innerText=0;
  document.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
}

function render(){
  const tb=document.getElementById("records");
  tb.innerHTML="";
  let sum=0;
  data.forEach(d=>{
    sum+=d.amount;
    tb.innerHTML+=`<tr><td>${d.chair}</td><td>${d.services}</td><td>₹${d.amount}</td></tr>`;
  });
  document.getElementById("todayTotal").innerText=sum;
}

function downloadReport(){
  if(data.length==0){
    showMsg("No data to download");
    return;
  }
  let csv="Chair,Services,Amount\n";
  data.forEach(d=>csv+=`${d.chair},${d.services},${d.amount}\n`);
  const a=document.createElement("a");
  a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
  a.download="salon-report.csv";
  a.click();
}

function closeDay(){
  data=[];
  localStorage.removeItem("salonData");
  render();
  showMsg("Day closed & data reset");
}

render();
</script>

</body>
</html>
