<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Salon Chair System</title>

<style>
body{
  font-family: system-ui, Arial;
  background:#f2f4f8;
  padding:12px;
}
h2{text-align:center}

.card{
  background:#fff;
  padding:12px;
  border-radius:12px;
  margin-bottom:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
}
.row{display:flex; gap:8px; margin-bottom:8px}
.row button{flex:1}

button{
  padding:10px;
  border:none;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
}
.chair{background:#2563eb;color:#fff}
.service{background:#e5e7eb}
.save{background:#16a34a;color:#fff}
.reset{background:#dc2626;color:#fff}

.active{outline:3px solid #16a34a}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td{
  border-bottom:1px solid #ddd;
  padding:6px;
  text-align:left;
}
.total{
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
</style>
</head>

<body>

<h2>Salon Chair System</h2>

<div class="card">
<b>Select Chair</b>
<div class="row">
  <button class="chair" onclick="selectChair(1)">Chair 1</button>
  <button class="chair" onclick="selectChair(2)">Chair 2</button>
  <button class="chair" onclick="selectChair(3)">Chair 3</button>
</div>
<div class="row">
  <button class="chair" onclick="selectChair(4)">Chair 4</button>
  <button class="chair" onclick="selectChair(5)">Chair 5</button>
</div>
</div>

<div class="card">
<b>Select Services</b>
<button class="service" onclick="addService('Haircut',150)">Haircut ₹150</button>
<button class="service" onclick="addService('Beard',80)">Beard ₹80</button>
<button class="service" onclick="addService('Facial',300)">Facial ₹300</button>
<button class="service" onclick="addService('Hair Color',100)">Hair Color ₹100</button>
</div>

<div class="card">
<b>Current Bill</b>
<div id="bill"></div>
<p><b>Total:</b> ₹ <span id="billTotal">0</span></p>
<button class="save" onclick="saveEntry()">Save Entry</button>
</div>

<div class="card total">
Today Total: ₹ <span id="todayTotal">0</span>
</div>

<div class="card">
<b>Entries</b>
<table>
<thead>
<tr><th>Chair</th><th>Services</th><th>Amount</th></tr>
</thead>
<tbody id="records"></tbody>
</table>
</div>

<div class="card">
<button class="save" onclick="downloadReport()">Download Report</button>
</div>

<div class="card">
<button class="reset" onclick="closeDay()">Close Day</button>
</div>

<script>
let data = JSON.parse(localStorage.getItem("salonData")) || [];
let selectedChair = null;
let currentServices = [];
let currentTotal = 0;

function selectChair(ch){
  selectedChair = ch;
  document.querySelectorAll(".chair").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
}

function addService(name,price){
  if(!selectedChair){
    alert("Select chair first");
    return;
  }
  currentServices.push(name);
  currentTotal += price;
  renderBill();
}

function renderBill(){
  bill.innerHTML = currentServices.join(" + ");
  billTotal.innerText = currentTotal;
}

function saveEntry(){
  if(!selectedChair || currentServices.length===0){
    alert("Select chair & service");
    return;
  }
  data.push({
    date:new Date().toLocaleDateString(),
    chair:selectedChair,
    services:[...currentServices],
    amount:currentTotal
  });
  localStorage.setItem("salonData",JSON.stringify(data));
  currentServices=[];
  currentTotal=0;
  bill.innerHTML="";
  billTotal.innerText=0;
  render();
}

function render(){
  records.innerHTML="";
  let total=0;
  data.forEach(r=>{
    records.innerHTML+=`
      <tr>
        <td>${r.chair}</td>
        <td>${r.services.join(" + ")}</td>
        <td>₹${r.amount}</td>
      </tr>`;
    total+=r.amount;
  });
  todayTotal.innerText=total;
}

function closeDay(){
  if(confirm("Close today? Data will reset")){
    localStorage.removeItem("salonData");
    data=[];
    render();
  }
}

function downloadReport(){
  if(data.length===0){
    alert("No data to download");
    return;
  }
  let csv="Date,Chair,Services,Amount\n";
  let total=0;
  data.forEach(r=>{
    csv+=`${r.date},${r.chair},"${r.services.join("+")}",${r.amount}\n`;
    total+=r.amount;
  });
  csv+=`,,,Total ${total}\n`;

  const blob=new Blob([csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="salon-report.csv";
  a.click();
}

render();
</script>

</body>
</html>
